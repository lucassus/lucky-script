program        : statements

statements     : _NEWLINE* (statement (_NEWLINE+ statement?)*)?

statement      : func_decr
               | return_stmt
               | expression

func_decr      : "function" IDENTIFIER "(" ")" block

return_stmt    : "return" expression

expression     : assigment
               | anonymous_func
               | term (("+" | "-") term)*

block          : "{" statements "}"

assigment      : IDENTIFIER "=" expression

anonymous_func : "function" "(" ")" block

term           : factor (("*" | "/") factor)*

factor         : ("+" | "-") factor
               | power

power          : atom ("**" factor)*

atom           : NUMBER
               | func_call
               | IDENTIFIER
               | "(" expression ")"

func_call      : IDENTIFIER "(" ")"

%import common.WS_INLINE
%import common.NEWLINE -> _NEWLINE
%import common.CNAME -> IDENTIFIER
%import common.NUMBER

%ignore WS_INLINE
