block       : statement* _NEWLINE*

statement   : _NEWLINE+ expression
            | function_declaration
            | expression

function_declaration: "function" IDENTIFIER "(" ")" "{" block "}"

expression  : assigment
            | term (("+" | "-") term)*

assigment   : IDENTIFIER "=" expression

term        : factor (("*" | "/") factor)*

factor      : ("+" | "-") factor
            | power

power       : atom ("**" factor)*

atom        : NUMBER
            | function_call
            | IDENTIFIER
            | "(" expression ")"

function_call: IDENTIFIER "(" ")"

%import common.WS
%import common.NEWLINE -> _NEWLINE
%import common.CNAME -> IDENTIFIER
%import common.NUMBER

%ignore WS
